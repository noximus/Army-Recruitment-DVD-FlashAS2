import mx.transitions.Tween;import mx.transitions.easing.None;import mx.utils.Delegate;import util.xml.XMLSA;import type.XString;class ui.nav.NavigationItem extends MovieClip{	private var mc:MovieClip;	public var mc_glow,mc_bkgd,mc_starL,mc_starR:MovieClip;	private var tweens:Object;		//our id.  this is in the xml doc.	private var id:String;		private static var activeItem:NavigationItem=null;	private var _xml:XMLSA;	private var settings:Settings;		public var tf_name:TextField;		function NavigationItem(){		mc_glow=mc_bkgd.mc_glow;		mc_glow._alpha=0;		mc_starL._alpha=0;		mc_starR._alpha=0;	}	private function init():Void{		mc = this;		settings = new Settings();		settings.nav.addEventListener("navitem",Delegate.create(this,broadcastHandler));		id=xml.id.getValue();				tweens = new Object();				EnableMouseEvents();	}	public function broadcastHandler(eventObject:Object):Void{		if(eventObject.id==id || !eventObject.id){			var func:Function=this[eventObject.functionName];			func.call(this,eventObject.params);		}	}	public function EnableMouseEvents():Void{		mc.onPress=function(){			this._press();		}		mc.onRollOver=function(){			this._rollover();		}		mc.onRollOut=function(){			this._rollout();		}	}	public function DisableMouseEvents():Void{		delete(mc.onRollOut);		delete(mc.onRollOver);		delete(mc.onPress);	}	private function _rollover():Void{		if(mc_glow._alpha<50){			mc_glow._alpha=50;			mc_starL._alpha=100;			mc_starR._alpha=100;		}		super.fadeTextFieldToColor(tf_name,"0xFFFFFF",90);		tweens.mcglow.stop();		tweens.mcglow = new Tween(mc_glow,"_alpha",None.easeNone,mc_glow._alpha,90,5,false);	}	private function _rollout():Void{		super.fadeTextFieldToColor(tf_name,"0xFFCC00",30);		tweens.mcglow.stop();		tweens.mcglow = new Tween(mc_glow,"_alpha",None.easeNone,mc_glow._alpha,50,5,false);		tweens.mcstarL = new Tween(mc_starL,"_alpha",None.easeNone,mc_glow._alpha,0,5,false);		tweens.mcstarR = new Tween(mc_starR,"_alpha",None.easeNone,mc_glow._alpha,0,5,false);		tweens.mcglow.onMotionFinished=function(){			this.obj._alpha=0;		}	}	private function _press():Void{		Select();	}	public function Unselect():Void{		EnableMouseEvents();		_rollout();		super.fadeTextFieldToColor(tf_name,"0xFFCC00",70);	}	public function Select():Void{		if(activeItem!=null){			activeItem.Unselect();		}		activeItem=this;		DisableMouseEvents();		tweens.mcglow.stop();		tweens.mcglow = new Tween(mc_glow,"_alpha",None.easeNone,mc_glow._alpha,100,3,false);		/*			<item>				<title>FOR PARENTS</title>				<target>mc_parents</target>				<xml>[section]/parents.xml</xml>			</item>						.... so now we have to replace [section] with the section that we're in from Settings();					*/		var sectionXML:XString = new XString(xml.xml.getValue());		sectionXML = sectionXML.replace("[section]",settings.sectionID);		settings.ref.LoadSection(sectionXML);		//settings.ref.LoadContentXML(sectionXML);	}	public function get xml():XMLSA{		return _xml;	}	public function set xml(val:XMLSA):Void{		_xml=val;		init();	}	}